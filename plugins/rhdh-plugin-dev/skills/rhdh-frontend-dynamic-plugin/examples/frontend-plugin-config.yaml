# Example Frontend Dynamic Plugin Configuration for RHDH
# This file demonstrates various frontend plugin wiring patterns

plugins:
  # ============================================================
  # Complete Frontend Plugin Example
  # Demonstrates all common wiring patterns
  # ============================================================

  - package: oci://quay.io/example/my-complete-plugin:v1.0.0!my-complete-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-complete:
            # Custom icons (register before using in routes/menus)
            appIcons:
              - name: myPluginIcon
                importName: MyPluginIcon

            # Full page routes with sidebar menu
            dynamicRoutes:
              - path: /my-plugin
                importName: MyPluginPage
                menuItem:
                  icon: myPluginIcon
                  text: My Plugin

              - path: /my-plugin/settings
                importName: MyPluginSettings
                # No menuItem = no sidebar entry

            # Entity page cards
            mountPoints:
              # Overview card (full width, first row)
              - mountPoint: entity.page.overview/cards
                importName: MyOverviewCard
                config:
                  layout:
                    gridColumn: '1 / -1'
                    gridRowStart: 1
                  if:
                    allOf:
                      - isKind: component
                      - hasAnnotation: my-plugin/enabled

              # CI tab card
              - mountPoint: entity.page.ci/cards
                importName: MyCICard
                config:
                  if:
                    isKind: component

            # Sidebar menu configuration
            menuItems:
              my-plugin:
                priority: 50

  # ============================================================
  # Entity Card Only Plugin
  # Adds a card to entity pages without routes
  # ============================================================

  - package: oci://quay.io/example/my-card-plugin:v1.0.0!my-card-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-card:
            mountPoints:
              - mountPoint: entity.page.overview/cards
                importName: MyInfoCard
                config:
                  layout:
                    gridColumn: 'span 2'
                  if:
                    anyOf:
                      - isType: service
                      - isType: website

  # ============================================================
  # Custom Tab Plugin
  # Adds a new tab to entity pages
  # ============================================================

  - package: oci://quay.io/example/my-tab-plugin:v1.0.0!my-tab-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-tab:
            # Define the new tab
            entityTabs:
              - path: /my-custom-tab
                title: My Custom Tab
                mountPoint: entity.page.my-custom-tab
                priority: 50

            # Add content to the tab
            mountPoints:
              - mountPoint: entity.page.my-custom-tab/cards
                importName: MyTabContent
                config:
                  layout:
                    gridColumn: '1 / -1'

  # ============================================================
  # Search Integration Plugin
  # Adds custom search types, filters, and results
  # ============================================================

  - package: oci://quay.io/example/my-search-plugin:v1.0.0!my-search-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-search:
            mountPoints:
              # Custom search result type
              - mountPoint: search.page.types
                importName: MySearchType

              # Custom search filter
              - mountPoint: search.page.filters
                importName: MySearchFilter

              # Custom search result renderer
              - mountPoint: search.page.results
                importName: MySearchResult

  # ============================================================
  # Nested Menu Plugin
  # Demonstrates parent-child menu hierarchy
  # ============================================================

  - package: oci://quay.io/example/my-tools-plugin:v1.0.0!my-tools-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-tools:
            appIcons:
              - name: toolsIcon
                importName: ToolsIcon
              - name: tool1Icon
                importName: Tool1Icon
              - name: tool2Icon
                importName: Tool2Icon

            dynamicRoutes:
              - path: /tools/tool1
                importName: Tool1Page
                menuItem:
                  icon: tool1Icon
                  text: Tool 1

              - path: /tools/tool2
                importName: Tool2Page
                menuItem:
                  icon: tool2Icon
                  text: Tool 2

            menuItems:
              # Parent menu item
              tools:
                icon: toolsIcon
                title: Developer Tools
                priority: 100

              # Child items nested under parent
              tools.tool1:
                priority: 20
                parent: tools

              tools.tool2:
                priority: 10
                parent: tools

  # ============================================================
  # Theme Plugin
  # Provides custom light and dark themes
  # ============================================================

  - package: oci://quay.io/example/my-theme-plugin:v1.0.0!my-theme-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-theme:
            themes:
              # Override default light theme
              - id: light
                title: My Light Theme
                variant: light
                icon: brightness5
                importName: myLightThemeProvider

              # Override default dark theme
              - id: dark
                title: My Dark Theme
                variant: dark
                icon: brightness2
                importName: myDarkThemeProvider

              # Additional custom theme
              - id: high-contrast
                title: High Contrast
                variant: light
                icon: contrastIcon
                importName: highContrastThemeProvider

  # ============================================================
  # Scaffolder Extension Plugin
  # Custom form fields for software templates
  # ============================================================

  - package: oci://quay.io/example/my-scaffolder-plugin:v1.0.0!my-scaffolder-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-scaffolder:
            scaffolderFieldExtensions:
              - importName: MyCustomPicker
              - importName: MyValidatedInput
              - importName: MyRepoSelector

  # ============================================================
  # TechDocs Addon Plugin
  # Extends TechDocs functionality
  # ============================================================

  - package: oci://quay.io/example/my-techdocs-addon:v1.0.0!my-techdocs-addon
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-techdocs-addon:
            techdocsAddons:
              - importName: MyTechDocsAddon
                config:
                  props:
                    position: header

  # ============================================================
  # Context Menu Plugin
  # Adds actions to entity context menu
  # ============================================================

  - package: oci://quay.io/example/my-actions-plugin:v1.0.0!my-actions-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-actions:
            appIcons:
              - name: refreshIcon
                importName: RefreshIcon
              - name: exportIcon
                importName: ExportIcon

            mountPoints:
              - mountPoint: entity.context.menu
                importName: RefreshDialog
                config:
                  props:
                    title: Refresh Data
                    icon: refreshIcon

              - mountPoint: entity.context.menu
                importName: ExportDialog
                config:
                  props:
                    title: Export Entity
                    icon: exportIcon

  # ============================================================
  # Route Bindings Plugin
  # Binds external routes between plugins
  # ============================================================

  - package: oci://quay.io/example/my-integration-plugin:v1.0.0!my-integration-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-integration:
            routeBindings:
              targets:
                - importName: myIntegrationPlugin

              bindings:
                - bindTarget: catalogPlugin.externalRoutes
                  bindMap:
                    viewTechDoc: myIntegrationPlugin.routes.docs

  # ============================================================
  # API Factory Plugin
  # Provides or overrides Utility APIs
  # ============================================================

  - package: oci://quay.io/example/my-api-plugin:v1.0.0!my-api-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-api:
            apiFactories:
              - importName: myCustomApiFactory

  # ============================================================
  # Custom Sign-In Page Plugin
  # Provides custom authentication UI
  # ============================================================

  - package: oci://quay.io/example/my-auth-plugin:v1.0.0!my-auth-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-auth:
            signInPage:
              importName: MyCustomSignInPage

            providerSettings:
              - title: My SSO Provider
                description: Sign in with corporate SSO
                provider: core.auth.my-sso

  # ============================================================
  # Application Header Plugin
  # Adds global header to the application
  # ============================================================

  - package: oci://quay.io/example/my-header-plugin:v1.0.0!my-header-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-header:
            mountPoints:
              - mountPoint: application/header
                importName: GlobalHeader
                config:
                  position: above-main-content

  # ============================================================
  # Application Provider Plugin
  # Adds context providers to the application
  # ============================================================

  - package: oci://quay.io/example/my-provider-plugin:v1.0.0!my-provider-plugin
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          my-org.plugin-my-provider:
            mountPoints:
              - mountPoint: application/provider
                importName: MyGlobalProvider

              - mountPoint: application/listener
                importName: MyEventListener
